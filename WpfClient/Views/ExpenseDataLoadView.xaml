<UserControl x:Class="WpfClient.Views.ExpenseDataLoadView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:WpfClient.Views"
             xmlns:vm="clr-namespace:WpfClient.ViewModels"
             xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:behaviors="clr-namespace:WpfClient.ViewModels.Behaviors"
             xmlns:helpers="clr-namespace:WpfClient.ViewModels.Helpers"
             mc:Ignorable="d" 
             d:DesignHeight="220" d:DesignWidth="500" MinHeight="220" MinWidth="500">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Styles/TextBoxClearButton.xaml" />
                <ResourceDictionary Source="Styles/StyledCheckBox.xaml" />
                <ResourceDictionary Source="Styles/StyledComboBox.xaml" />
                <ResourceDictionary Source="Styles/StyledButton.xaml" />
                <ResourceDictionary Source="Styles/StyledListBox.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
        </ResourceDictionary>
    </UserControl.Resources>
    <UserControl.DataContext>
        <vm:ExpenseDataLoadViewModel />
    </UserControl.DataContext>
    <Grid>
        <Grid Margin="10" x:Name="MainContent" >
            <Grid.Style>
                <Style TargetType="Grid">
                    <Setter Property="IsEnabled" Value="True" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsBusy}" Value="True">
                            <Setter Property="IsEnabled" Value="False" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Grid.Style>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <StackPanel Grid.Row="0"  Orientation="Horizontal" Margin="10,5,0,5">
                <TextBox helpers:PlaceholderHelper.PlaceholderText="Документ Excel" 
              Tag="{Binding ClearDocumentPathCommand}" 
              Text="{Binding DocumentPath, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" 
              IsReadOnly="True" Width="455" Style="{StaticResource ClearableTextBoxStyle}">
                    <b:Interaction.Behaviors>
                        <behaviors:ClearButtonBehavior />
                        <behaviors:PlaceholderBehavior PlaceholderTargetName="Placeholder"/>
                        <behaviors:MouseClickCommandBehavior Command="{Binding SelectDocumentPathCommand}" />
                    </b:Interaction.Behaviors>
                </TextBox>
            </StackPanel>
            <StackPanel Grid.Row="1"  Orientation="Horizontal" Margin="10,25,0,5">
                <Label Content="Всего позиций: "/>
                <Label Margin="-10,0,0,0" Content="{Binding MaterialStocks.Count}"/>
            </StackPanel>
            <StackPanel Grid.Row="2"  Orientation="Horizontal" Margin="10,0,0,5">
                <TextBox helpers:PlaceholderHelper.PlaceholderText="Склад" 
              Tag="{Binding ClearSelectedWarehouseCommand}" 
              Text="{Binding SelectedWarehouse.Name, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" 
              IsReadOnly="True" Width="455" Style="{StaticResource ClearableTextBoxStyle}">
                    <b:Interaction.Behaviors>
                        <behaviors:ClearButtonBehavior />
                        <behaviors:PlaceholderBehavior PlaceholderTargetName="Placeholder"/>
                        <behaviors:MouseClickCommandBehavior Command="{Binding SelectWarehouseCommand}" />
                    </b:Interaction.Behaviors>
                </TextBox>
            </StackPanel>
            <StackPanel Grid.Row="3" HorizontalAlignment="Center" Orientation="Horizontal" Margin="10,15,0,5">
                <Button Content="Загрузить" Command="{Binding UploadMaterialsCommand}"/>
            </StackPanel>
        </Grid>
        <Grid Background="#80000000" Panel.ZIndex="1" 
       Visibility="{Binding IsBusy, Mode=OneWay, Converter={StaticResource BooleanToVisibilityConverter}}">
            <Border Background="White" CornerRadius="5" Padding="20" 
             HorizontalAlignment="Center" VerticalAlignment="Center">
                <StackPanel>
                    <TextBlock Text="Загрузка..." FontSize="16" HorizontalAlignment="Center" />
                    <ProgressBar IsIndeterminate="True" Width="100" Height="20" Margin="0,10,0,0" />
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</UserControl>
